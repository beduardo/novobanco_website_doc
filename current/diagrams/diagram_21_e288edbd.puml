@startuml
skinparam backgroundColor #FEFEFE

title Arquitetura de Tokens - Dois NÃ­veis

package "Browser" {
    [Session Cookie] as SC
    note bottom of SC
        HttpOnly, Secure
        SameSite=Strict
    end note
}

package "BFF Cache" {
    [Access Token] as AT
    [Refresh Token] as RT
    note bottom of AT : TTL: 15 min
    note bottom of RT : TTL: 7 dias
}

package "Backend Services" {
    [OAuth Server] as OAUTH
}

[Browser] --> [BFF] : Session Cookie
[BFF] --> AT : Lookup
[BFF] --> RT : Refresh silencioso
[BFF] --> OAUTH : Bearer Token

@enduml
