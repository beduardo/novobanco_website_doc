@startuml
skinparam backgroundColor #FEFEFE

actor "Utilizador" as USER
participant "Frontend" as FE
participant "BFF" as BFF
participant "Auth Service" as AUTH
participant "Cache" as CACHE

USER -> FE : Login
FE -> BFF : POST /auth/login\n(credentials)
BFF -> AUTH : Validar credenciais
AUTH --> BFF : OAuth Token

BFF -> BFF : Gerar Session ID
BFF -> CACHE : Store(SessionID, Token)
BFF --> FE : Set-Cookie: SessionID\n(HttpOnly, Secure)

FE -> BFF : GET /accounts\n(Cookie: SessionID)
BFF -> CACHE : Get(SessionID)
CACHE --> BFF : Token
BFF -> AUTH : Validate Token
BFF --> FE : Account data

@enduml
