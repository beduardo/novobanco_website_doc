@startuml
skinparam backgroundColor #FEFEFE

participant "Frontend" as FE
participant "BFF" as BFF
participant "API Gateway" as GW
participant "Backend Services" as BE
participant "Core Banking" as CORE

FE -> BFF : REST/HTTPS\n(Cookie sessão)
activate BFF

BFF -> BFF : Validar sessão\n(Cache lookup)
BFF -> GW : REST\n(Bearer token)
activate GW

GW -> BE : REST
activate BE

BE -> CORE : Protocolo interno
activate CORE
CORE --> BE : Response
deactivate CORE

BE --> GW : JSON
deactivate BE

GW --> BFF : JSON
deactivate GW

BFF -> BFF : Transformar/Agregar
BFF --> FE : JSON
deactivate BFF

@enduml
