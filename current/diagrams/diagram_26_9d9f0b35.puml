@startuml
skinparam sequenceMessageAlign center

participant "Frontend" as FE
participant "BFF" as BFF
participant "Azure API\nGateway" as GW
participant "Backend API\n(Facade)" as API
participant "Core\nBanking" as CB

FE -> BFF : GET /api/accounts\n(Session Cookie)
activate BFF

BFF -> BFF : Valida sessão\nObtém user token do cache

BFF -> GW : GET /v1/accounts\n(Bearer Token)
activate GW

GW -> GW : Rate limiting\nValidação

GW -> API : GET /v1/accounts
activate API

API -> CB : Consulta contas
activate CB
CB --> API : Dados raw
deactivate CB

API --> GW : Response JSON
deactivate API

GW --> BFF : Response
deactivate GW

BFF -> BFF : Transforma dados\npara formato web

BFF --> FE : Response adaptado
deactivate BFF

@enduml
