@startuml
skinparam backgroundColor #FEFEFE

title Fluxo de Dados - HomeBanking Web

package "Browser" {
    [localStorage] as LS
    note right of LS : Dados básicos\nDados públicos\nNotícias
}

package "BFF (.NET 8)" {
    [Session Cache] as SC
    [Token Cache] as TC
    note right of SC : Session ID\nUser context
    note right of TC : Access Token\nRefresh Token
}

package "Backend Services" {
    database "Core Banking" as CB
    database "Account Data" as AD
    database "Transaction Data" as TD
}

[Browser] --> LS : Dados não sensíveis
[Browser] --> [BFF] : HTTPS/REST
[BFF] --> SC : Sessão
[BFF] --> TC : OAuth Tokens
[BFF] --> [API Gateway] : REST
[API Gateway] --> CB
[API Gateway] --> AD
[API Gateway] --> TD

@enduml
